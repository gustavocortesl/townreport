<navigation></navigation>
<div class="container full-height">
  <page-header content="vm.pageHeader"></page-header>
  <div class="row full-height">
    <div class="col-xs-12 col-sm-8 full-height">      
      <div class="map-container full-height">
        <div id="map"></div>
      </div>
    </div>
    <div class="col-xs-12 col-sm-4 full-height">
      <!--p class="lead">{{ vm.sidebar.content }}</p-->
      <div class="well" id="well1">
        <a ng-show="vm.isLoggedIn" ng-click="vm.popupReviewForm()" href="" class="btn btn-xs btn-primary pull-right">Add problem</a>
        <a ng-hide="vm.isLoggedIn" href="/#/login?page={{ vm.currentPath }}" class="btn btn-xs btn-primary  pull-right">Login to add problem</a>
        <h4>Problem List</h4>
        <label for="filter">Filter results</label>
        <input id="filter" type="text", name="filter", ng-model="textFilter">
        <div class="error">{{ vm.message }}</div>
      </div>
      <div class="well" id="well2">
        <div class="row list-group">        
          <div class="col-xs-12 list-group-item" ng-repeat="problem in vm.data.problems | customSearch : textFilter">
            <h4>
              <a href="/#/problem/{{ problem._id }}">{{ problem.name }}</a>
              <small class="rating-stars" priority-marks rating="problem.priority"></small>
              <span class="badge pull-right badge-default">
                <a href="#" ng-click="openInfoWindow($event, problem.marker)">{{ problem.distance | formatDistance }}</a></span>
            </h4>
            <p class="lead">{{ problem.category }}
              <span class="label label-warning">{{ problem.state }}</span>
            </p>
            <p class="small">{{ problem.description }}</p>
            <p class="small">{{ problem.address }}</p>
          </div>
        </div>
      </div>
    </div>  
  </div>
</div>
<footer-generic></footer-generic>
